<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping App</title>
  <!-- <link rel="stylesheet" href="styles.css"> -->
  <style>
    .cart {
      display: flex;
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007bff;
      color: #ffffff;
      padding: 10px 15px;
      border-radius: 50%;
      cursor: pointer;
      z-index: 1000;
    }

    .cart-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
    }

    .cart-container {
      position: fixed;
      top: 0;
      right: 0;
      width: 300px;
      height: 100%;
      background-color: #fff;
      z-index: 1001;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
    }

    .cart-container.open {
      transform: translateX(0%);
    }

    .cart-content {
      padding: 20px;
    }

    /* .cart-item {
      margin-bottom: 10px;
    } */

    .main {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      /* margin:auto; */
      width: 1000px;
      /* height: ; */
    }

    div.container {
      width: 300px;
      align-items: center;
      margin: 2px 15px;
      height: 400px;
      display: flex;
      flex-direction: column;


    }

    h1 {
      text-align: center;
      background-color: orange;
      color: white;
    }
  </style>
</head>

<body>
  <h1>Coffee shope</h1>
  <div id="product" class="main"> </div>
  <div class="cart" onclick="toggleCart()">
    <img src="carts.png" width="100px" height="80px" alt="Cart Icon">
    <span class="cart-count">0</span>
    <div class="cart-overlay" onclick="toggleCart()"></div>
    <div class="cart-container">
      <div class="cart-content">
        <!-- Cart items will be dynamically added here -->
      </div>
    </div>

  </div>

  <script>
    let products = [
      {
        name: "Chai",
        description: " Specially Blended Coffee Powder ",
        price: 300,
        image: "coffee1.jfif",
        id: "1"
      },
      {
        name: "double chocklate",
        description: "This double chocolate with Milk",
        price: 200,
        image: "coffee2.jfif",
        id: "2"
      },
      {
        name: "Black Coffee",
        description: "Milk with Specially Blended Coffee",
        price: 350,
        image: "coffee3.jpg",
        id: "3"
      },
      {
        name: "Turmeric Tea",
        description: "Specially Blended Turmeric powder with milk",
        price: 250,
        image: "coffee4.jfif",
        id: "4"
      },

      {
        name: "Cappuccino",
        description: "cappuccino gives you good flavour",
        price: 400,
        image: "coffee5.jfif",
        id: "5"
      },
      {
        name: "Chocolate Coffee",
        description: "Mixed with Milk and hot Chocolate Syrup",
        price: 300,
        image: "coffee6.jfif",
        id: "6"
      }
    ];


    let msg = ""
    products.forEach((value, key) => {
      msg = msg + `<div class = "container">
                
                <div><img src="${value.image}" width="200px" height="200px"></div>
                <div><p>${value.name}</p></div>
                <div><p>${value.description}</p></div>
                <div><p>${value.price}</p></div>
                <div><button id="b${key}" onclick=addToCart(${key})>add to cart</button></div>
                </div>`;
    });
    let listCarts = [];
    function addToCart(key) {
      if (listCarts[key] == null) {
        listCarts[key] = products[key];
        listCarts[key].quantity = 1;
      } else {
        listCarts[key].quantity = listCarts[key].quantity + 1;
      }
      console.log(listCarts);
      reloadCart();
    }

    function reloadCart() {
      listCart = document.querySelector(".cart-content")
      listCart.innerHTML = "";
      listCarts.forEach((value, key) => {
        if (value != null) {
          let newDiv = document.createElement("li");
          newDiv.innerHTML = `
                    <div><img width=100px height=100px src="${value.image}" ></div>
                    <div>${value.name}</div>
                    <div>${value.price.toLocaleString()}</div>

                    <div>
                        <button onclick="changeQuantity(${key},${value.quantity - 1})">-</button>
                        <div class="count">${value.quantity}</div>
                        <button onclick="changeQuantity(${key},${value.quantity + 1})">+</button>
                    </div>`;
          listCart.appendChild(newDiv)
        }
      })

    }


    function changeQuantity(key, quantity) {
      if (quantity == 0) {
        delete listCarts[key];
      } else {
        listCarts[key].quantity = quantity;
        listCarts[key].price = quantity * products[key].price;
      }
      reloadCart();

    }
    let cartOpen = false;

    function toggleCart() {
      const cartContainer = document.querySelector('.cart-container');
      const cartOverlay = document.querySelector('.cart-overlay');

      cartOpen = !cartOpen;

      if (cartOpen) {
        cartContainer.classList.add('open');
        cartOverlay.style.display = 'block';
      } else {
        cartContainer.classList.remove('open');
        cartOverlay.style.display = 'none';
      }
    }

    product.innerHTML = msg;
  </script>
</body>

</html>